# GENERATED BY optimus-cli â€” DO NOT EDIT
# To modify, update config/languages.json and run: optimus-cli render-k8s
apiVersion: keda.sh/v1alpha1
kind: ScaledObject
metadata:
  name: optimus-worker-{{language}}-scaler
  namespace: optimus
  labels:
    language: {{language}}
spec:
  scaleTargetRef:
    name: optimus-worker-{{language}}  # Target language-specific deployment
  minReplicaCount: 10  # Keep workers warm
  maxReplicaCount: 50  # Resource limit
  pollingInterval: 1  # Poll every second for quick response
  cooldownPeriod: 30  # Wait 30s before scaling down
  triggers:
  # Main queue trigger
  - type: redis
    metadata:
      address: redis.optimus.svc.cluster.local:6379
      listName: {{queue_name}}
      listLength: "1"
  # Retry queue trigger
  - type: redis
    metadata:
      address: redis.optimus.svc.cluster.local:6379
      listName: {{queue_name}}:retry
      listLength: "1"
